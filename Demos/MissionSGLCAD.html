<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      -->
<title>Design a spacecraft for the Solar Gravitational Lens mission</title>
<meta name="generator" content="MATLAB 24.1">
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.date" content="2025-01-27">
<meta name="DC.source" content="MissionSGLCAD.m">
<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
</head>
<body>
<div class="content">
<h1>Design a spacecraft for the Solar Gravitational Lens mission</h1>
<!--introduction-->
<p>You can change parameters to resize the vehicle. The fuel masses must come from a mission sizing script.</p>
<p>See also BuildCADModel, CreateReport, ExportOBJ</p>
<!--/introduction-->
<h2>Contents</h2>
<div>
<ul>
<li>
<a href="#2">Vehicle parameters</a>
</li>
<li>
<a href="#3">Script controls</a>
</li>
<li>
<a href="#4">Mission sizing calculations</a>
</li>
<li>
<a href="#5">Spacecraft parameters</a>
</li>
<li>
<a href="#6">Mass calculations</a>
</li>
<li>
<a href="#7">Create mass budget</a>
</li>
<li>
<a href="#8">Add subsystems</a>
</li>
<li>
<a href="#9">Update the mass properties to produce the tables</a>
</li>
<li>
<a href="#10">Export</a>
</li>
</ul>
</div>
<pre class="codeinput">
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">%   Copyright (c) 2015 Princeton Satellite Systems, Inc.</span>
<span class="comment">%   All Rights Reserved.</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">%   Since 2016.1</span>
<span class="comment">%--------------------------------------------------------------------------</span>

<span class="comment">% The launch vehicle shroud is 5080 mm by 6096 + 7665</span>
</pre>
<h2 id="2">Vehicle parameters</h2>
<pre class="codeinput">power     = 1.7e6;        <span class="comment">% W</span>
nEngines  = 1;          <span class="comment">% Number of engines at power level</span>
specPower = 1;        <span class="comment">% kW/kg</span>
massHe3   = 0.24;    <span class="comment">% kg</span>
massD     = 3.600e+03; <span class="comment">% kg</span>
fS        = 0.02;       <span class="comment">% Structural fraction for tanks, kg/kg fuel tank/fuel</span>
fInsulation = 0.05;     <span class="comment">% Fraction for sizing cyrogenic tank insulation</span>
</pre>
<h2 id="3">Script controls</h2>
<pre class="codeinput">exportCAD           = 1;
addLander           = 0; <span class="comment">% the lander is a subassembly</span>
</pre>
<h2 id="4">Mission sizing calculations</h2>
<pre class="codeinput">
<span class="comment">% Use the density of the fuels as liquids for tank sizing.</span>
<span class="comment">% He3: 59 kg/m3 as a liquid or 0.1339 g/L at STP</span>
rhoHe3        = 0.1339;     <span class="comment">% kg/m^3</span>
rhoD          = 163.83;     <span class="comment">% kg/m^3</span>
volD          = massD/rhoD;
volHe3        = massHe3/rhoHe3;
rD            = (3*volD/(4*pi))^(1/3);
rHe3          = (3*volHe3/(4*pi))^(1/3);
qSc.power     = power;
qSc.specPower = specPower;
rDTank       	=  (1+fInsulation)*rD;
massDTank    	= (1+fS)*massD;
rHe3Tank      = (1+fInsulation)*rHe3;
massHe3Tank   = (1+fS)*massHe3;

<span class="comment">% Fusion engine</span>
<span class="comment">%--------------</span>
rEngine             = 0.55;
lEngine             = (10-2)/(10-1)*power*1e-6 + 1.1;
lNozzle             = 0.8;
eta                 = 0.58; <span class="comment">% engine efficiency for sizing radiators</span>
</pre>
<h2 id="5">Spacecraft parameters</h2>
<pre class="codeinput">lengthCylTrans      = 2;
radiusCylTrans      = 1.5;
wPayload            = 1;
lTruss              = [1 0.5 1];
massCylTrans        = 200; <span class="comment">% arbitrary shell mass</span>
xDTank              =  0;
xLander             = xDTank + rDTank + lTruss(1) + wPayload + 0.1;
xPayload            = xDTank + rDTank + wPayload/2 + lTruss(1);
xTruss              = [xDTank + rDTank, -rDTank-lTruss(2), -rDTank - lTruss(2) - 2*rHe3Tank - lTruss(3)];
xHe3Tank            = xTruss(2) - rHe3Tank;
xTrans              = xTruss(3) - lengthCylTrans;
xAntenna            = xPayload;
xEngine             = xTrans - lEngine;
xShell              = xTruss(3);
rShell              = 1.05*rDTank;
lShell              = xTruss(1) - xTruss(3);

<span class="comment">% Propellant tubes</span>
xD1                 = [xDTank;0.5*rD;-0.5*rD];
xD2                 = [xTrans;0.5*rD;-0.5*rD];
xHe1              	= [xHe3Tank;0.3*rHe3;0.3*rHe3];
xHe2                = [xTrans;0.3*rHe3;0.3*rHe3];
rDT                 = 0.05;
rHeT                = 0.05;

<span class="comment">% Radiator</span>
radiatorArealMass   = 2.75;
tempRadiator        = 625;
tRadiator           = 0.1;
lengthTruss         = 3;

<span class="comment">% Solar panels</span>
solarEff            = 0.3;
powerSolar          = 2000;
areaSolar           = (powerSolar/1367)/solarEff; <span class="comment">% 1367 is solar flux at Earth's orbit</span>
ySolar              = 2; <span class="comment">% m</span>
zSolar              = 0.5*areaSolar/ySolar; <span class="comment">% m</span>
xSolar              = 0.01;
zStrut              = 1;
massSolar           = powerSolar/150; <span class="comment">% https://www.orbitalatk.com/space-systems/space-components/solar-arrays/docs/FS007_15_OA_3862%20UltraFlex.pdf</span>
rStrutSolar         = [-6;0;radiusCylTrans];
rPanelSolar         = [-6-xSolar/2;0;radiusCylTrans+zStrut+zSolar/2];
rBackSolar          = [-6+xSolar/2;0;radiusCylTrans+zStrut+zSolar/2];
</pre>
<h2 id="6">Mass calculations</h2>
<p>engine mass is obtained simply from specific power estimate</p>
<pre class="codeinput">massEngine      = qSc.power/(1000*qSc.specPower);

clear <span class="string">s</span>

<span class="comment">% Build the CAD model</span>
BuildCADModel( <span class="string">'initialize'</span> );

BuildCADModel( <span class="string">'set name'</span> ,	<span class="string">'SGL'</span> );
BuildCADModel( <span class="string">'set units'</span>,	<span class="string">'mks'</span>  );

m = CreateBody( <span class="string">'make'</span>, <span class="string">'name'</span>, <span class="string">'Core'</span> );
BuildCADModel(<span class="string">'add body'</span>, m );
BuildCADModel( <span class="string">'compute paths'</span> );

<span class="comment">% D2 tank - includes the fuel mass</span>
m         = CreateComponent(	<span class="string">'make'</span>, <span class="string">'sphere'</span>, <span class="string">'radius'</span>, rDTank, <span class="string">'n'</span>, 20, <span class="string">'faceColor'</span>, <span class="string">'gold foil'</span>,<span class="string">'inside'</span>,0, <span class="keyword">...</span>
                               <span class="string">'rA'</span>, [xDTank;0;0], <span class="string">'mass'</span>, massDTank, <span class="string">'name'</span>, <span class="string">'D2 Tank'</span>, <span class="string">'body'</span>, 1 );
BuildCADModel( <span class="string">'add component'</span>, m );

b       = [0 0 1;0 1 0;-1 0 0];

m = CreateComponent(<span class="string">'make'</span>, <span class="string">'cylinder'</span>, <span class="string">'rUpper'</span>, radiusCylTrans, <span class="string">'rLower'</span>, radiusCylTrans,<span class="keyword">...</span>
                    <span class="string">'h'</span>, lengthCylTrans, <span class="string">'n'</span>, 20, <span class="string">'b'</span>, b, <span class="string">'faceColor'</span>, <span class="string">'aluminum'</span>,<span class="keyword">...</span>
                    <span class="string">'inside'</span>,0, <span class="string">'rA'</span>, [xTrans;0;0], <span class="string">'mass'</span>, 0, <span class="string">'name'</span>, <span class="string">'Engine Enclosure'</span>, <span class="string">'body'</span>, 1 );
BuildCADModel( <span class="string">'add component'</span>, m );

<span class="comment">% Add the solar panels</span>
[vPanel, fPanel] = Box( xSolar, ySolar, zSolar, <span class="string">'+x'</span> );
[vBack,  fBack]  = Box( xSolar, ySolar, zSolar, <span class="string">'-x'</span> );
[vStrut, fStrut] = SolarWingSupport( ySolar, zStrut, 2*xSolar );
bStrutSolar      = [0 0 1;1 0 0;0 1 0];

<span class="comment">% + Z</span>
m    = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, vPanel, <span class="string">'face'</span>, fPanel,<span class="string">'rA'</span>,rPanelSolar,<span class="keyword">...</span>
                              <span class="string">'name'</span>, <span class="string">'Solar Wing +Y Cells'</span>, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, [0 0 1],<span class="string">'inside'</span>, 0 );
BuildCADModel( <span class="string">'add component'</span>, m );

m    = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, vBack, <span class="string">'face'</span>, fBack,<span class="string">'rA'</span>,rBackSolar,<span class="keyword">...</span>
                              <span class="string">'name'</span>, <span class="string">'Solar Wing +Y Back'</span>, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, <span class="string">'black'</span>,<span class="string">'inside'</span>, 0 );
BuildCADModel( <span class="string">'add component'</span>, m );

m    = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, vStrut, <span class="string">'face'</span>, fStrut,<span class="string">'rA'</span>,rStrutSolar,<span class="string">'b'</span>,bStrutSolar,<span class="keyword">...</span>
                              <span class="string">'name'</span>, <span class="string">'Solar Wing +Y Strut'</span>, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, <span class="string">'black'</span>,<span class="string">'inside'</span>, 0 );
BuildCADModel( <span class="string">'add component'</span>, m );

<span class="comment">% - Z</span>

rPanelSolar(3) = -rPanelSolar(3);
rBackSolar(3)  = -rBackSolar(3);
rStrutSolar(3) = - rStrutSolar(3);
bStrutSolar    = [0 0 1;1 0 0;0 -1 0];

m    = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, vPanel, <span class="string">'face'</span>, fPanel,<span class="string">'rA'</span>,rPanelSolar,<span class="keyword">...</span>
                              <span class="string">'name'</span>, <span class="string">'Solar Wing +Y Cells'</span>, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, [0 0 1],<span class="string">'inside'</span>, 0 );
BuildCADModel( <span class="string">'add component'</span>, m );

m    = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, vBack, <span class="string">'face'</span>, fBack,<span class="string">'rA'</span>,rBackSolar,<span class="keyword">...</span>
                              <span class="string">'name'</span>, <span class="string">'Solar Wing +Y Back'</span>, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, <span class="string">'black'</span>,<span class="string">'inside'</span>, 0 );
BuildCADModel( <span class="string">'add component'</span>, m );

m    = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, vStrut, <span class="string">'face'</span>, fStrut,<span class="string">'rA'</span>,rStrutSolar,<span class="string">'b'</span>,bStrutSolar,<span class="keyword">...</span>
                              <span class="string">'name'</span>, <span class="string">'Solar Wing +Y Strut'</span>, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, <span class="string">'black'</span>,<span class="string">'inside'</span>, 0 );
BuildCADModel( <span class="string">'add component'</span>, m );

<span class="comment">% Add He3 Tank</span>
m = CreateComponent( <span class="string">'make'</span>, <span class="string">'sphere'</span>, <span class="string">'radius'</span>, rHe3Tank, <span class="string">'n'</span>, 20,  <span class="keyword">...</span>
                     <span class="string">'faceColor'</span>, <span class="string">'gold foil'</span>,<span class="string">'inside'</span>,0, <span class="string">'rA'</span>, [xHe3Tank;0;0], <span class="string">'mass'</span>, massHe3Tank, <span class="string">'name'</span>, <span class="string">'He3 Tank'</span>, <span class="string">'body'</span>, 1 );
BuildCADModel( <span class="string">'add component'</span>, m );

<span class="comment">% Add shell</span>
m = CreateComponent(<span class="string">'make'</span>, <span class="string">'cylinder'</span>, <span class="string">'rUpper'</span>, rShell, <span class="string">'rLower'</span>, rShell,<span class="keyword">...</span>
                     <span class="string">'h'</span>, lShell, <span class="string">'n'</span>, 20, <span class="string">'b'</span>, b, <span class="string">'faceColor'</span>, <span class="string">'mirror'</span>,<span class="keyword">...</span>
                     <span class="string">'inside'</span>,0, <span class="string">'rA'</span>, [xShell;0;0], <span class="string">'mass'</span>, massCylTrans,<span class="keyword">...</span>
                     <span class="string">'name'</span>, <span class="string">'Shell'</span>, <span class="string">'body'</span>, 1 );
BuildCADModel( <span class="string">'add component'</span>, m );

<span class="comment">% Add lines</span>
[v, f] = TubeBetweenPoints(xD1,xD2,rDT);
 m    = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, v, <span class="string">'face'</span>, f,<span class="string">'rA'</span>,[0;0;0],<span class="keyword">...</span>
                              <span class="string">'name'</span>, <span class="string">'D2 Line'</span>, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, <span class="string">'gold foil'</span>,<span class="string">'inside'</span>, 1 );
BuildCADModel( <span class="string">'add component'</span>, m );

[v, f] = TubeBetweenPoints(xHe1,xHe2,rHeT);
 m    = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, v, <span class="string">'face'</span>, f,<span class="string">'rA'</span>,[0;0;0],<span class="keyword">...</span>
                              <span class="string">'name'</span>, <span class="string">'He3 Line'</span>, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, <span class="string">'gold foil'</span>,<span class="string">'inside'</span>, 1 );
BuildCADModel( <span class="string">'add component'</span>, m );

<span class="comment">% Add Engines</span>
<span class="comment">%------------</span>
massNozzle  = 0.05*massEngine;
massEngine  = 0.95*massEngine;
xNozzle     = xEngine - lNozzle;
rA          = [xEngine;0;0];
name        = sprintf(<span class="string">'Engine %d'</span>,1);
m           = CreateComponent( <span class="string">'make'</span>, <span class="string">'cylinder'</span>, <span class="string">'rUpper'</span>, rEngine, <span class="string">'rLower'</span>, rEngine,<span class="keyword">...</span>
                               <span class="string">'h'</span>, lEngine, <span class="string">'n'</span>, 20, <span class="string">'b'</span>, b, <span class="keyword">...</span>
                               <span class="string">'faceColor'</span>, <span class="string">'gold foil'</span>,<span class="string">'inside'</span>,0, <span class="string">'rA'</span>, rA,<span class="keyword">...</span>
                               <span class="string">'mass'</span>, massEngine, <span class="string">'name'</span>, name, <span class="string">'body'</span>, 1 );
BuildCADModel( <span class="string">'add component'</span>, m );

rA      = [xNozzle;0;0];

name      = sprintf(<span class="string">'Magnetic Nozzle %d'</span>,1);
m       = CreateComponent(	<span class="string">'make'</span>, <span class="string">'cylinder'</span>, <span class="string">'rUpper'</span>, 0.5*rEngine, <span class="string">'rLower'</span>, rEngine, <span class="string">'h'</span>, lNozzle, <span class="string">'n'</span>, 20, <span class="string">'b'</span>, b, <span class="keyword">...</span>
                              <span class="string">'faceColor'</span>, <span class="string">'black'</span>,<span class="string">'inside'</span>,0, <span class="string">'rA'</span>, rA, <span class="string">'mass'</span>, massNozzle, <span class="string">'name'</span>, name, <span class="string">'body'</span>, 1 );
BuildCADModel( <span class="string">'add component'</span>, m );

<span class="comment">% Add Radiators</span>
<span class="comment">%--------------</span>
heatRadiatedPerSide = (1-eta)*nEngines*qSc.power/4; <span class="comment">% for one radiator side</span>
sigma               = 5.67e-8;
area                = heatRadiatedPerSide/(sigma*tempRadiator^4);
xWidth              = lengthCylTrans;
yWidth              = area/xWidth;
massRadiator        = radiatorArealMass*area;

q = 1;
<span class="keyword">for</span> k = 1:2
	name	  = sprintf(<span class="string">'Radiator %d'</span>,k);
	rA      = [xTrans + 0.5*lengthCylTrans;q*(radiusCylTrans+lengthTruss);0];

	m       = CreateComponent(	<span class="string">'make'</span>, <span class="string">'box'</span>, <span class="string">'x'</span>, xWidth, <span class="string">'y'</span>, yWidth, <span class="string">'z'</span>, tRadiator, <span class="keyword">...</span>
                                <span class="string">'faceColor'</span>, <span class="string">'radiator'</span>,<span class="string">'inside'</span>,0, <span class="string">'rA'</span>, rA, <span class="string">'mass'</span>, massRadiator, <span class="string">'name'</span>, name, <span class="string">'body'</span>, 1 );
	BuildCADModel( <span class="string">'add component'</span>, m );

	q       = -q;

<span class="keyword">end</span>

<span class="comment">% Optical communications system</span>
mGimbal     = 7.5;
massAntenna = 2;
massTruss   = 10;
rhoTruss    = 409.7/4.55^2;
bA          = [0 0 1;0 1 0;-1 0 0];
[v, f, l]   = Truss( [0;0;0], [4;0;0], 0.25, 6, 0.025 );

lBase       = 2.5 + radiusCylTrans;

<span class="comment">% DOCS 1</span>
m = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, v, <span class="string">'face'</span>, f, <span class="string">'edgeColor'</span>,<span class="string">'aluminum'</span>, <span class="string">'rA'</span>, [xAntenna;0;lBase],<span class="keyword">...</span>
                     <span class="string">'name'</span>, <span class="string">'Optical Truss 1'</span>, <span class="string">'body'</span>, 1, <span class="string">'b'</span>,bA, <span class="string">'mass'</span>,massTruss,<span class="keyword">...</span>
                     <span class="string">'faceColor'</span>, <span class="string">'gold foil'</span>, <span class="string">'inside'</span>, 0);
BuildCADModel( <span class="string">'add component'</span>, m );

m = CreateComponent( <span class="string">'make'</span>, <span class="string">'cylinder'</span>, <span class="string">'rUpper'</span>, 0.1, <span class="string">'rLower'</span>,0.1, <span class="string">'h'</span>, 0.2, <span class="string">'n'</span>,12, <span class="string">'rA'</span>, [xAntenna;0;lBase],<span class="keyword">...</span>
                     <span class="string">'name'</span>, <span class="string">'Optical Azimuth Gimbal 1'</span>, <span class="string">'body'</span>, 1, <span class="string">'mass'</span>, mGimbal/2, <span class="keyword">...</span>
                     <span class="string">'faceColor'</span>, <span class="string">'gold foil'</span>, <span class="string">'inside'</span>, 0);
BuildCADModel( <span class="string">'add component'</span>, m );


m = CreateComponent( <span class="string">'make'</span>, <span class="string">'cylinder'</span>, <span class="string">'rUpper'</span>, 0.15, <span class="string">'rLower'</span>,0.15, <span class="string">'h'</span>, 0.8, <span class="string">'edgeColor'</span>,<span class="string">'black'</span>,<span class="string">'b'</span>,b,<span class="keyword">...</span>
                    <span class="string">'name'</span>, <span class="string">'DOCS1'</span>, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, <span class="string">'black'</span>,<span class="string">'inside'</span>, 0,<span class="string">'mass'</span>,massAntenna,<span class="keyword">...</span>
                     <span class="string">'rA'</span>,[xAntenna-0.4;0;lBase+0.4] );
BuildCADModel( <span class="string">'add component'</span>, m );


<span class="comment">% Add trusses</span>
<span class="comment">%------------</span>
<span class="keyword">for</span> k = 1:length(xTruss)
  xBottom     = [xTruss(k);0;0];
  xTop        = [xTruss(k)+lTruss(k);0;0];
  nTruss      = 2;
  [v, f]      = Truss(  xBottom, xTop, rHe3Tank, nTruss, 0.01*rHe3Tank );
  c           = cos(pi/4);
  v           = ([1 0 0;0 c c;0 -c c]*v')';
  s           = sprintf(<span class="string">'Central Truss %d'</span>,k);
  m           = CreateComponent( <span class="string">'make'</span>, <span class="string">'generic'</span>, <span class="string">'vertex'</span>, v, <span class="string">'face'</span>, f,<span class="string">'edgeColor'</span>, <span class="string">'truss'</span> ,<span class="string">'rA'</span>,[0;0;0],<span class="keyword">...</span>
                              <span class="string">'name'</span>, s, <span class="string">'body'</span>, 1, <span class="string">'faceColor'</span>, [0.8 0.1 0.2],<span class="string">'inside'</span>, 1 );
  BuildCADModel( <span class="string">'add component'</span>, m );
<span class="keyword">end</span>

<span class="comment">% Add payload</span>
mPayload = 300;
m       = CreateComponent(	<span class="string">'make'</span>, <span class="string">'box'</span>, <span class="string">'x'</span>, wPayload, <span class="string">'y'</span>, wPayload, <span class="string">'z'</span>, wPayload,<span class="string">'faceColor'</span>, <span class="string">'gold foil'</span>,<span class="string">'inside'</span>,0,  <span class="keyword">...</span>
                            <span class="string">'rA'</span>, [xPayload;0;0], <span class="string">'mass'</span>, mPayload, <span class="string">'name'</span>, <span class="string">'Payload'</span>, <span class="string">'body'</span>, 1 );

BuildCADModel( <span class="string">'add component'</span>, m );
</pre>
<img vspace="5" hspace="5" src="MissionSGLCAD_01.png" alt=""> <h2 id="7">Create mass budget</h2>
<h2 id="8">Add subsystems</h2>
<pre class="codeinput">BuildCADModel( <span class="string">'add subsystem'</span>, <span class="string">'ACS'</span>,        {<span class="string">'star camera'</span>,<span class="string">'rwa'</span> <span class="string">'torquer'</span>} );
BuildCADModel( <span class="string">'add subsystem'</span>, <span class="string">'Propulsion'</span>,	{<span class="string">'engine'</span> <span class="string">'fuel'</span> <span class="string">'radiator'</span> <span class="string">'nozzle'</span>} );
BuildCADModel( <span class="string">'add subsystem'</span>, <span class="string">'Fuel'</span>,     	{<span class="string">'tank'</span>,<span class="string">'line'</span>} );
BuildCADModel( <span class="string">'add subsystem'</span>, <span class="string">'Insulation'</span>, {<span class="string">'shell'</span>} );
BuildCADModel( <span class="string">'add subsystem'</span>, <span class="string">'Telemetry and Command'</span>,{<span class="string">'optical'</span>, <span class="string">'board'</span>,<span class="string">'DOCS'</span>} );
BuildCADModel( <span class="string">'add subsystem'</span>, <span class="string">'Structure'</span>,  {<span class="string">'support'</span>, <span class="string">'frame'</span>, <span class="string">'strut'</span>, <span class="string">'panel'</span>,<span class="string">'central'</span>} );
</pre>
<h2 id="9">Update the mass properties to produce the tables</h2>
<pre class="codeinput">BuildCADModel( <span class="string">'update body mass properties'</span> );
g = BuildCADModel( <span class="string">'get model'</span>);
BuildCADModel(<span class="string">'show vehicle'</span>);

bySubsystem = true;
noZero = true;
CreateReport( g, <span class="string">'tex'</span>, FileFullpath(<span class="string">'SGLMassSummary'</span>), <span class="string">'mass'</span>,  bySubsystem, noZero, true );
CreateReport( g, <span class="string">'tex'</span>, FileFullpath(<span class="string">'SGLMass'</span>), <span class="string">'mass'</span>,  bySubsystem, noZero, false );
CreateReport( g, <span class="string">'txt'</span>, [], <span class="string">'mass'</span>,  bySubsystem, noZero, false );
CreateReport( g, <span class="string">'txt'</span>, [], <span class="string">'mass'</span>,  bySubsystem, noZero, true );
</pre>
<pre class="codeoutput">                              Component           Mass          Units 
                          ACS subsystem                             
                   Propulsion subsystem                             
                               Engine 1           1615            kg 
                             Radiator 1          56.74            kg 
                             Radiator 2          56.74            kg 
                      Magnetic Nozzle 1             85            kg 
             Propulsion Subsystem Total           1813            kg 
                         Fuel subsystem                             
                                D2 Tank           3672            kg 
                               He3 Tank         0.2448            kg 
                   Fuel Subsystem Total           3672            kg 
                   Insulation subsystem                             
                                  Shell            200            kg 
             Insulation Subsystem Total            200            kg 
        Telemetry and Command subsystem                             
                        Optical Truss 1             10            kg 
               Optical Azimuth Gimbal 1           3.75            kg 
                                  DOCS1              2            kg 
  Telemetry and Command Subsystem Total          15.75            kg 
                    Structure subsystem                             
                Miscellaneous subsystem                             
                                Payload            300            kg 
          Miscellaneous Subsystem Total            300            kg 
                                  Total           6001            kg 
                              Component           Mass   Units 
             Propulsion Subsystem Total           1813     kg 
                   Fuel Subsystem Total           3672     kg 
             Insulation Subsystem Total            200     kg 
  Telemetry and Command Subsystem Total          15.75     kg 
          Miscellaneous Subsystem Total            300     kg 
                                  Total           6001     kg 
</pre>
<img vspace="5" hspace="5" src="MissionSGLCAD_02.png" alt=""> <img vspace="5" hspace="5" src="MissionSGLCAD_03.png" alt=""> <h2 id="10">Export</h2>
<pre class="codeinput">
<span class="keyword">if</span>( exportCAD )
	ExportOBJ( g, FileFullpath(<span class="string">'SGL'</span>) );
<span class="keyword">end</span>

<span class="comment">% xParam = {'Radiator Area',2*area,...</span>
<span class="comment">%           '3He Mass',massHe3,</span>
<span class="comment">%           'Total Payload',</span>


<span class="comment">%--------------------------------------</span>
<span class="comment">% PSS internal file version information</span>
<span class="comment">%--------------------------------------</span>

<span class="comment">% $Id: 0631d01f56862a84279874893cc9f52bec63b99f $</span>
</pre>
<p class="footer">
<br>
<a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2024a</a>
<br>
</p>
</div>
<!--
##### SOURCE BEGIN #####
%% Design a spacecraft for the Solar Gravitational Lens mission
%
% You can change parameters to resize the vehicle. The fuel masses must come
% from a mission sizing script.
%
% See also BuildCADModel, CreateReport, ExportOBJ
%
%%
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%   Copyright (c) 2015 Princeton Satellite Systems, Inc.
%   All Rights Reserved.
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%   Since 2016.1
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH

% The launch vehicle shroud is 5080 mm by 6096 + 7665

%% Vehicle parameters
power     = 1.7e6;        % W
nEngines  = 1;          % Number of engines at power level
specPower = 1;        % kW/kg
massHe3   = 0.24;    % kg
massD     = 3.600e+03; % kg
fS        = 0.02;       % Structural fraction for tanks, kg/kg fuel tank/fuel
fInsulation = 0.05;     % Fraction for sizing cyrogenic tank insulation

%% Script controls

exportCAD           = 1;
addLander           = 0; % the lander is a subassembly

%% Mission sizing calculations

% Use the density of the fuels as liquids for tank sizing.
% He3: 59 kg/m3 as a liquid or 0.1339 g/L at STP
rhoHe3        = 0.1339;     % kg/m^3
rhoD          = 163.83;     % kg/m^3
volD          = massD/rhoD;
volHe3        = massHe3/rhoHe3;
rD            = (3*volD/(4*pi))^(1/3);
rHe3          = (3*volHe3/(4*pi))^(1/3);
qSc.power     = power; 
qSc.specPower = specPower;
rDTank       	=  (1+fInsulation)*rD;
massDTank    	= (1+fS)*massD;
rHe3Tank      = (1+fInsulation)*rHe3;
massHe3Tank   = (1+fS)*massHe3;

% Fusion engine
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
rEngine             = 0.55;
lEngine             = (10-2)/(10-1)*power*1e-6 + 1.1;
lNozzle             = 0.8;
eta                 = 0.58; % engine efficiency for sizing radiators

%% Spacecraft parameters
lengthCylTrans      = 2;
radiusCylTrans      = 1.5;
wPayload            = 1;
lTruss              = [1 0.5 1];
massCylTrans        = 200; % arbitrary shell mass
xDTank              =  0;
xLander             = xDTank + rDTank + lTruss(1) + wPayload + 0.1;
xPayload            = xDTank + rDTank + wPayload/2 + lTruss(1);
xTruss              = [xDTank + rDTank, -rDTank-lTruss(2), -rDTank - lTruss(2) - 2*rHe3Tank - lTruss(3)];
xHe3Tank            = xTruss(2) - rHe3Tank;
xTrans              = xTruss(3) - lengthCylTrans;
xAntenna            = xPayload;
xEngine             = xTrans - lEngine;
xShell              = xTruss(3);
rShell              = 1.05*rDTank;
lShell              = xTruss(1) - xTruss(3);

% Propellant tubes
xD1                 = [xDTank;0.5*rD;-0.5*rD];
xD2                 = [xTrans;0.5*rD;-0.5*rD];
xHe1              	= [xHe3Tank;0.3*rHe3;0.3*rHe3];
xHe2                = [xTrans;0.3*rHe3;0.3*rHe3];
rDT                 = 0.05;
rHeT                = 0.05;

% Radiator
radiatorArealMass   = 2.75;
tempRadiator        = 625;
tRadiator           = 0.1;
lengthTruss         = 3;

% Solar panels 
solarEff            = 0.3;
powerSolar          = 2000;
areaSolar           = (powerSolar/1367)/solarEff; % 1367 is solar flux at Earth's orbit
ySolar              = 2; % m
zSolar              = 0.5*areaSolar/ySolar; % m
xSolar              = 0.01;
zStrut              = 1;
massSolar           = powerSolar/150; % https://www.orbitalatk.com/space-systems/space-components/solar-arrays/docs/FS007_15_OA_3862%20UltraFlex.pdf
rStrutSolar         = [-6;0;radiusCylTrans];
rPanelSolar         = [-6-xSolar/2;0;radiusCylTrans+zStrut+zSolar/2];
rBackSolar          = [-6+xSolar/2;0;radiusCylTrans+zStrut+zSolar/2];

%% Mass calculations
% engine mass is obtained simply from specific power estimate
massEngine      = qSc.power/(1000*qSc.specPower);

clear s

% Build the CAD model
BuildCADModel( 'initialize' );

BuildCADModel( 'set name' ,	'SGL' );
BuildCADModel( 'set units',	'mks'  );

m = CreateBody( 'make', 'name', 'Core' );
BuildCADModel('add body', m );
BuildCADModel( 'compute paths' );

% D2 tank - includes the fuel mass
m         = CreateComponent(	'make', 'sphere', 'radius', rDTank, 'n', 20, 'faceColor', 'gold foil','inside',0, ...
                               'rA', [xDTank;0;0], 'mass', massDTank, 'name', 'D2 Tank', 'body', 1 );
BuildCADModel( 'add component', m );

b       = [0 0 1;0 1 0;-1 0 0];

m = CreateComponent('make', 'cylinder', 'rUpper', radiusCylTrans, 'rLower', radiusCylTrans,...
                    'h', lengthCylTrans, 'n', 20, 'b', b, 'faceColor', 'aluminum',...
                    'inside',0, 'rA', [xTrans;0;0], 'mass', 0, 'name', 'Engine Enclosure', 'body', 1 );
BuildCADModel( 'add component', m );

% Add the solar panels
[vPanel, fPanel] = Box( xSolar, ySolar, zSolar, '+x' );
[vBack,  fBack]  = Box( xSolar, ySolar, zSolar, '-x' );
[vStrut, fStrut] = SolarWingSupport( ySolar, zStrut, 2*xSolar );
bStrutSolar      = [0 0 1;1 0 0;0 1 0];

% + Z
m    = CreateComponent( 'make', 'generic', 'vertex', vPanel, 'face', fPanel,'rA',rPanelSolar,...
                              'name', 'Solar Wing +Y Cells', 'body', 1, 'faceColor', [0 0 1],'inside', 0 );
BuildCADModel( 'add component', m );

m    = CreateComponent( 'make', 'generic', 'vertex', vBack, 'face', fBack,'rA',rBackSolar,...
                              'name', 'Solar Wing +Y Back', 'body', 1, 'faceColor', 'black','inside', 0 );
BuildCADModel( 'add component', m );

m    = CreateComponent( 'make', 'generic', 'vertex', vStrut, 'face', fStrut,'rA',rStrutSolar,'b',bStrutSolar,...
                              'name', 'Solar Wing +Y Strut', 'body', 1, 'faceColor', 'black','inside', 0 );
BuildCADModel( 'add component', m );

% - Z

rPanelSolar(3) = -rPanelSolar(3);
rBackSolar(3)  = -rBackSolar(3);
rStrutSolar(3) = - rStrutSolar(3);
bStrutSolar    = [0 0 1;1 0 0;0 -1 0];

m    = CreateComponent( 'make', 'generic', 'vertex', vPanel, 'face', fPanel,'rA',rPanelSolar,...
                              'name', 'Solar Wing +Y Cells', 'body', 1, 'faceColor', [0 0 1],'inside', 0 );
BuildCADModel( 'add component', m );

m    = CreateComponent( 'make', 'generic', 'vertex', vBack, 'face', fBack,'rA',rBackSolar,...
                              'name', 'Solar Wing +Y Back', 'body', 1, 'faceColor', 'black','inside', 0 );
BuildCADModel( 'add component', m );

m    = CreateComponent( 'make', 'generic', 'vertex', vStrut, 'face', fStrut,'rA',rStrutSolar,'b',bStrutSolar,...
                              'name', 'Solar Wing +Y Strut', 'body', 1, 'faceColor', 'black','inside', 0 );
BuildCADModel( 'add component', m );

% Add He3 Tank
m = CreateComponent( 'make', 'sphere', 'radius', rHe3Tank, 'n', 20,  ...
                     'faceColor', 'gold foil','inside',0, 'rA', [xHe3Tank;0;0], 'mass', massHe3Tank, 'name', 'He3 Tank', 'body', 1 );
BuildCADModel( 'add component', m );

% Add shell
m = CreateComponent('make', 'cylinder', 'rUpper', rShell, 'rLower', rShell,...
                     'h', lShell, 'n', 20, 'b', b, 'faceColor', 'mirror',...
                     'inside',0, 'rA', [xShell;0;0], 'mass', massCylTrans,...
                     'name', 'Shell', 'body', 1 );
BuildCADModel( 'add component', m );

% Add lines
[v, f] = TubeBetweenPoints(xD1,xD2,rDT);
 m    = CreateComponent( 'make', 'generic', 'vertex', v, 'face', f,'rA',[0;0;0],...
                              'name', 'D2 Line', 'body', 1, 'faceColor', 'gold foil','inside', 1 );
BuildCADModel( 'add component', m );
 
[v, f] = TubeBetweenPoints(xHe1,xHe2,rHeT);
 m    = CreateComponent( 'make', 'generic', 'vertex', v, 'face', f,'rA',[0;0;0],...
                              'name', 'He3 Line', 'body', 1, 'faceColor', 'gold foil','inside', 1 );
BuildCADModel( 'add component', m );

% Add Engines
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
massNozzle  = 0.05*massEngine;
massEngine  = 0.95*massEngine;
xNozzle     = xEngine - lNozzle;
rA          = [xEngine;0;0];
name        = sprintf('Engine %d',1);
m           = CreateComponent( 'make', 'cylinder', 'rUpper', rEngine, 'rLower', rEngine,...
                               'h', lEngine, 'n', 20, 'b', b, ...
                               'faceColor', 'gold foil','inside',0, 'rA', rA,...
                               'mass', massEngine, 'name', name, 'body', 1 );
BuildCADModel( 'add component', m );
    
rA      = [xNozzle;0;0];

name      = sprintf('Magnetic Nozzle %d',1);
m       = CreateComponent(	'make', 'cylinder', 'rUpper', 0.5*rEngine, 'rLower', rEngine, 'h', lNozzle, 'n', 20, 'b', b, ...
                              'faceColor', 'black','inside',0, 'rA', rA, 'mass', massNozzle, 'name', name, 'body', 1 );
BuildCADModel( 'add component', m );

% Add Radiators
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
heatRadiatedPerSide = (1-eta)*nEngines*qSc.power/4; % for one radiator side
sigma               = 5.67e-8;
area                = heatRadiatedPerSide/(sigma*tempRadiator^4);
xWidth              = lengthCylTrans;
yWidth              = area/xWidth;
massRadiator        = radiatorArealMass*area;

q = 1;
for k = 1:2
	name	  = sprintf('Radiator %d',k);
	rA      = [xTrans + 0.5*lengthCylTrans;q*(radiusCylTrans+lengthTruss);0];

	m       = CreateComponent(	'make', 'box', 'x', xWidth, 'y', yWidth, 'z', tRadiator, ...
                                'faceColor', 'radiator','inside',0, 'rA', rA, 'mass', massRadiator, 'name', name, 'body', 1 );
	BuildCADModel( 'add component', m );
    
	q       = -q;

end

% Optical communications system
mGimbal     = 7.5;
massAntenna = 2;
massTruss   = 10;
rhoTruss    = 409.7/4.55^2;
bA          = [0 0 1;0 1 0;-1 0 0];
[v, f, l]   = Truss( [0;0;0], [4;0;0], 0.25, 6, 0.025 );

lBase       = 2.5 + radiusCylTrans;

% DOCS 1
m = CreateComponent( 'make', 'generic', 'vertex', v, 'face', f, 'edgeColor','aluminum', 'rA', [xAntenna;0;lBase],...
                     'name', 'Optical Truss 1', 'body', 1, 'b',bA, 'mass',massTruss,...
                     'faceColor', 'gold foil', 'inside', 0);
BuildCADModel( 'add component', m );

m = CreateComponent( 'make', 'cylinder', 'rUpper', 0.1, 'rLower',0.1, 'h', 0.2, 'n',12, 'rA', [xAntenna;0;lBase],...
                     'name', 'Optical Azimuth Gimbal 1', 'body', 1, 'mass', mGimbal/2, ...
                     'faceColor', 'gold foil', 'inside', 0);
BuildCADModel( 'add component', m );


m = CreateComponent( 'make', 'cylinder', 'rUpper', 0.15, 'rLower',0.15, 'h', 0.8, 'edgeColor','black','b',b,...
                    'name', 'DOCS1', 'body', 1, 'faceColor', 'black','inside', 0,'mass',massAntenna,...
                     'rA',[xAntenna-0.4;0;lBase+0.4] );
BuildCADModel( 'add component', m );


% Add trusses
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
for k = 1:length(xTruss)
  xBottom     = [xTruss(k);0;0];
  xTop        = [xTruss(k)+lTruss(k);0;0];
  nTruss      = 2;
  [v, f]      = Truss(  xBottom, xTop, rHe3Tank, nTruss, 0.01*rHe3Tank );
  c           = cos(pi/4);
  v           = ([1 0 0;0 c c;0 -c c]*v')';
  s           = sprintf('Central Truss %d',k);
  m           = CreateComponent( 'make', 'generic', 'vertex', v, 'face', f,'edgeColor', 'truss' ,'rA',[0;0;0],...
                              'name', s, 'body', 1, 'faceColor', [0.8 0.1 0.2],'inside', 1 );
  BuildCADModel( 'add component', m );
end

% Add payload
mPayload = 300;
m       = CreateComponent(	'make', 'box', 'x', wPayload, 'y', wPayload, 'z', wPayload,'faceColor', 'gold foil','inside',0,  ...
                            'rA', [xPayload;0;0], 'mass', mPayload, 'name', 'Payload', 'body', 1 );

BuildCADModel( 'add component', m );


%% Create mass budget

%% Add subsystems
BuildCADModel( 'add subsystem', 'ACS',        {'star camera','rwa' 'torquer'} );
BuildCADModel( 'add subsystem', 'Propulsion',	{'engine' 'fuel' 'radiator' 'nozzle'} );
BuildCADModel( 'add subsystem', 'Fuel',     	{'tank','line'} );
BuildCADModel( 'add subsystem', 'Insulation', {'shell'} );
BuildCADModel( 'add subsystem', 'Telemetry and Command',{'optical', 'board','DOCS'} );
BuildCADModel( 'add subsystem', 'Structure',  {'support', 'frame', 'strut', 'panel','central'} );


%% Update the mass properties to produce the tables
BuildCADModel( 'update body mass properties' );
g = BuildCADModel( 'get model');
BuildCADModel('show vehicle');

bySubsystem = true;
noZero = true;
CreateReport( g, 'tex', FileFullpath('SGLMassSummary'), 'mass',  bySubsystem, noZero, true );
CreateReport( g, 'tex', FileFullpath('SGLMass'), 'mass',  bySubsystem, noZero, false );
CreateReport( g, 'txt', [], 'mass',  bySubsystem, noZero, false );
CreateReport( g, 'txt', [], 'mass',  bySubsystem, noZero, true );

%% Export
if( exportCAD )
	ExportOBJ( g, FileFullpath('SGL') );
end

% xParam = {'Radiator Area',2*area,...
%           '3He Mass',massHe3,
%           'Total Payload',


%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
% PSS internal file version information
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
% $Date:   MissionSGLCAD.m $
% $Id: 0631d01f56862a84279874893cc9f52bec63b99f $

##### SOURCE END #####
-->
</body>
</html>
